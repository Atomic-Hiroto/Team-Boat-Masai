var products = [
    {
        image: "https://cdn.shopify.com/s/files/1/0057/8938/4802/products/c2386af9-4349-432f-8ba5-2b6aa06025c8_300x.png?v=1668756103",
        name: "Airdopes 131" ,
        finalPrice: 1099,
        discount: 63,
        mrp: 2990,
        rating: 4.8,
        review: 1298,
    },

    {
        image: "https://cdn.shopify.com/s/files/1/0057/8938/4802/products/main-image-1_300x.png?v=1661272676",
        name: "Storm Call",
        finalPrice: 1799,
        discount: 77,
        mrp: 7990,
        rating: 4.7,
        review: 23,
    },

    {
        image: "https://cdn.shopify.com/s/files/1/0057/8938/4802/products/main_blue_759e7ad4-18af-4407-9e8a-91c0058b1a74_300x.png?v=1648108782",
        name: "Wave Lite",
        finalPrice: 1799,
        discount: 74,
        mrp: 6990,
        rating: 4.9,
        review: 55,
    },

    {
        image: "https://cdn.shopify.com/s/files/1/0057/8938/4802/products/Grey_560cad08-698b-45d6-a3dd-d10ae3fec8ee_300x.png?v=1657775492",
        name: "Airdopes 131 PRO",
        finalPrice: 1199,
        discount: 60,
        mrp: 2990,
        rating: 4.9,
        review: 157,
    },

    {
        image: "https://cdn.shopify.com/s/files/1/0057/8938/4802/products/wave-call-3_300x.png?v=1658295343",
        name: "Wave Call",
        finalPrice: 1799,
        discount: 77,
        mrp: 7990,
        rating: 4.9,
        review: 41,
    },

    {
        image: "https://cdn.shopify.com/s/files/1/0057/8938/4802/products/115-main2_300x.png?v=1655368638",
        name: "Airdopes 115",
        finalPrice: 1599,
        discount: 47,
        mrp: 2990,
        rating: 4.9,
        review: 82,
    },

    {
        image: "https://cdn.shopify.com/s/files/1/0057/8938/4802/products/1-2_300x.png?v=1653637007",
        name: "Wave Neo",
        finalPrice: 1499,
        discount: 75,
        mrp: 6990,
        rating: 4.7,
        review: 20,
    },

    {
        image: "https://cdn.shopify.com/s/files/1/0057/8938/4802/products/removal.ai__tmp-63679b6ca9745_300x.png?v=1667734468",
        name: "Wave Play",
        finalPrice: 1999,
        discount: 67,
        mrp: 5990,
        rating: 4.0,
        review: 1,
    },

    {
        image: "https://cdn.shopify.com/s/files/1/0057/8938/4802/products/cb_e3d84ed1-bf9f-4631-aeb0-7392bfc9baee_300x.png?v=1669707141",
        name: "Xtend Talk",
        finalPrice: 2999,
        discount: 57,
        mrp: 6990,
        rating: 4.9,
        review: 7,
    },

    {
        image: "https://cdn.shopify.com/s/files/1/0057/8938/4802/products/grey_3cba165a-c357-4664-8015-2f8cbabb5a55_300x.png?v=1670787230",
        name: "Wave Arcade",
        finalPrice: 1999,
        discount: 75,
        mrp: 7990,
        rating: 4.0,
        review: 1,
    },

    {
        image: "https://cdn.shopify.com/s/files/1/0057/8938/4802/products/main-image-2_1_300x.png?v=1656016935",
        name: "Storm Pro",
        finalPrice: 2699,
        discount: 61,
        mrp: 6990,
        rating: 5.0,
        review: 10,
    },

    {
        image: "https://cdn.shopify.com/s/files/1/0057/8938/4802/products/DisneyStormPackaging3.1579_300x.png?v=1640110355",
        name: "Watch Storm - Black",
        finalPrice: 1999,
        discount: 67,
        mrp: 5990,
        rating: 5.0,
        review: 2,
    },
   
    {
        image: "https://cdn.shopify.com/s/files/1/0057/8938/4802/products/2_6fbb5373-2a92-452e-bdbf-939ba6a726df_300x.png?v=1669735799" ,
        name: "Wave Beat",
        finalPrice: 1499,
        discount: 75,
        mrp: 5990,
        rating: 4.6,
        review: 5,
    },
    {
        image:  "https://cdn.shopify.com/s/files/1/0057/8938/4802/products/blue_9aca9266-9d5e-4668-a559-1cad21f15b18_300x.png?v=1662810044",
        name: "Wave Style",
        finalPrice: 1449,
        discount: 76,
        mrp: 5990,
        rating: 4.7,
        review: 17,
    },
    {
        image: "https://cdn.shopify.com/s/files/1/0057/8938/4802/products/main1_f30681d9-fddb-4997-bfcb-503fcc258a5c_300x.png?v=1646392933",
        name: "Matrix",
        finalPrice: 3499,
        discount: 71,
        mrp: 11990,
        rating: 5.0,
        review: 11,
    },
    {
        image: "https://cdn.shopify.com/s/files/1/0057/8938/4802/products/B1-PhotoRoom_300x.png?v=1668117627",
        name: "Wave Voice",
        finalPrice: 2699,
        discount: 55,
        mrp: 5990,
        rating: 5.0,
        review: 2,
    },
    {
        image: "https://cdn.shopify.com/s/files/1/0057/8938/4802/products/main-image-2_300x.png?v=1655534170",
        name: "Stone 190 DC Ecition",
        finalPrice: 1299,
        discount: 57,
        mrp: 2990,
        rating: 5.0,
        review: 9,
    },
    {
        image: "https://cdn.shopify.com/s/files/1/0057/8938/4802/products/3_4_300x.png?v=1655534211",
        name: "Rockerz 450 DC ecition",
        finalPrice: 1999,
        discount: 50,
        mrp: 3990,
        rating: 5.0,
        review: 4,
    },
    {
        image: "https://cdn.shopify.com/s/files/1/0057/8938/4802/products/main-image_981b1901-df6e-4134-9090-7eb985d141be_600x.png?v=1655532145",
        name: "Airdopes 441 Pro Special",
        finalPrice: 2199,
        discount: 69,
        mrp: 6990,
        rating: 5.0,
        review: 24,
    },
    {
        image: "https://cdn.shopify.com/s/files/1/0057/8938/4802/products/3_4_1a97f712-5557-4a44-8231-d5817d038597_600x.png?v=1655536115",
        name: "Rockerz 450",
        finalPrice: 12099,
        discount: 50,
        mrp: 3990,
        rating: 5.0,
        review: 1,
    },
    {
        image: "https://cdn.shopify.com/s/files/1/0057/8938/4802/products/2_3_f3ee5c27-4f14-4159-9fb2-dc60e7d6ec66_600x.png?v=1655536230",
        name: "Rockerz 450 Batman DC",
        finalPrice: 1999,
        discount: 50,
        mrp: 3990,
        rating: 4.9,
        review: 8,
    },
    {
        image: "https://cdn.shopify.com/s/files/1/0057/8938/4802/products/main_2b98dda1-57d3-40ee-80f0-4687b8f8a72b_300x.png?v=1662537789",
        name: "Watch Xtend DC Edition",
        finalPrice: 2299,
        discount: 42,
        mrp: 3990,
        rating: 5.0,
        review: 2,
    },
    {
        image: "https://cdn.shopify.com/s/files/1/0057/8938/4802/products/DisneyStormPackaging3.1591_300x.png?v=1640110480",
        name: "Watch Storm - Captain",
        finalPrice: 1999,
        discount: 67,
        mrp: 5999,
        rating: 5.0,
        review: 1,
    },
    {
        image: "https://cdn.shopify.com/s/files/1/0057/8938/4802/products/190ca_300x.png?v=1639989015",
        name: "Stone 190 - Captain",
        finalPrice: 17999,
        discount: 57,
        mrp: 2999,
        rating: 5.0,
        review: 2,
    },
      
    ]
    localStorage.setItem("productlist", JSON.stringify(products));
 


    //displaying the products from array of object
    displayProd(products);

    function displayProd(p){
        document.getElementById("pagebox").textContent = ""
        p.map(function(elem, i){
            
            var divmain = document.createElement("div")
            divmain.setAttribute("id", "main")

            var divleft = document.createElement("div")
            divleft.setAttribute("id", "left")

            var divtag = document.createElement("div")
            divtag.setAttribute("id", "tag")

            var light = document.createElement("span")
            light.innerHTML = '<i class="fa-solid fa-bolt-lightning"></i>'

            var tagcontent = document.createElement("span")
            tagcontent.textContent = " SUPER SAVER"

            divtag.append(light, tagcontent)

            var imgprod = document.createElement("img")
            imgprod.setAttribute("src", elem.image)
            imgprod.setAttribute("id","image")
        divleft.append(divtag,imgprod)
           

            var divright = document.createElement("div")
            divright.setAttribute("id", "right")

            var divname = document.createElement("div")
            divname.setAttribute("id", "name")
            divname.textContent = elem.name
        // divright.append(divname)
            var divpricebox = document.createElement("div")
            divpricebox.setAttribute("id", "priceBox")

            var divfinalprice = document.createElement("div")
            divfinalprice.setAttribute("id", "finalprice")
            divfinalprice.textContent = "₹"+elem.finalPrice

            var divdiscount = document.createElement("div")
            divdiscount.setAttribute("id", "discount")
            divdiscount.textContent = elem.discount+"% off"

            var divmrp = document.createElement("div")
            divmrp.setAttribute("id", "mrp")
            divmrp.textContent = "₹"+elem.mrp

            divpricebox.append(divfinalprice, divdiscount, divmrp)
            // divright.append(divname, divpricebox)

            var divreview = document.createElement("div")
            divreview.setAttribute("id", "review")

            var p_review = document.createElement("p")
            
            var spanstar = document.createElement("span")
            spanstar.innerHTML = '<i class="fa-solid fa-star"></i>'+"  "
            spanstar.setAttribute("id", "star")

            var spanrate = document.createElement("span")
            spanrate.textContent = elem.rating +"    reviews"

            p_review.append( spanstar,spanrate)
            divreview.append(p_review)
            // divright.append(divname, divpricebox, divreview)

            var upitag = document.createElement("p")
            upitag.textContent = "₹15 Extra Discount on UPI"

            var divcart = document.createElement("div")
            divcart.setAttribute("id", "cartdiv")

            var cartbutton = document.createElement("button")
            cartbutton.textContent = "ADD TO CART"
        
            // {
            //     image: "https://cdn.shopify.com/s/files/1/0057/8938/4802/products/main-image-1_300x.png?v=1661272676",
            //     name: "Storm Call",
            //     finalPrice: 1799,
            //     discount: 77,
            //     mrp: 7990,
            //     rating: 4.7,
            //     review: 23,
            // },
            cartbutton.addEventListener("click",function(){
                // for(var i=0;i<boatcart.length;i++){
                //   if(boatcart[i].name == elem.name){
                //     alert("Item already added to cart")
                //     return
                //   }
                // }
                var temp = {
                    img: elem.image,
                    name: elem.name,
                    off: elem.discount,
                    ogprice: elem.mrp,
                    price: elem.finalPrice,
                    rating: elem.rating,
                    reviews: elem.review,
                    quan: 1,
                }
                
                boatcart.push(temp)
                localStorage.setItem("boat-cart",JSON.stringify(boatcart))
                updateCart()
              })

            divcart.append(cartbutton)

        //    divleft.append(divtag,imgprod)

            divright.append(divname, divpricebox, divreview, upitag, divcart)

            divmain.append(divleft, divright)
            
             
            document.getElementById("pagebox").append(divmain)

        })
    }
    

   // dropdown categories redirects

var boatcart = JSON.parse(localStorage.getItem("boat-cart")) || []
var boatlogin = JSON.parse(localStorage.getItem("boat-login")) || []

function goToWL(){
  window.location.href = "https://www.boat-lifestyle.com/collections/true-wireless-earbuds";
}

function goToWH(){
  window.location.href = "https://www.boat-lifestyle.com/collections/bluetooth-wireless-headphones"
}

function goToW(){
  window.location.href = "https://www.boat-lifestyle.com/collections/smart-watches"
}

function goToBW(){
  window.location.href = "https://www.boat-lifestyle.com/collections/wired-headphones"
}

function goToSS(){
  window.location.href = "https://www.boat-lifestyle.com/collections/bluetooth-speakers"
}

function goToAH(){
  window.location.href = "https://www.boat-lifestyle.com/collections/home-audio"
}

function goToMA(){
  window.location.href = "https://www.boat-lifestyle.com/collections/mobile-accessories"
}

function goToW(){
  window.location.href = "https://www.boat-lifestyle.com/collections/trebel-for-women"
}

function goToLE(){
  window.location.href = "https://www.boat-lifestyle.com/collections/limited-edition"
}

function goToT(){
  window.location.href = "https://www.boat-lifestyle.com/collections/misfit-by-boat"
}

function goToIG(){
  window.location.href = "https://www.boat-lifestyle.com/collections/immortal-gaming"
}

/* show cart sliding div */
let openPanelButton = document.getElementById("open-panel");
let closePanelButton = document.getElementById("close-panel");
let cartPanel = document.querySelector(".cart-panel");

openPanelButton.onclick = () => {
    cartPanel.classList.add("open");
    openPanelButton.classList.add("hide");
    document.querySelector("nav").style.position = "static"
    document.querySelector(".fa-magnifying-glass").style.display = "none"
    updateCart()
}

closePanelButton.onclick = () => {
    cartPanel.classList.remove("open");
    openPanelButton.classList.remove("hide");
    document.querySelector("nav").style.position = "sticky"
    document.querySelector(".fa-magnifying-glass").style.display = "block"
}

function updateCart(){
  document.getElementById("cc").textContent = ""
  if(boatcart.length==0){
    var p = document.createElement("p")
    p.textContent = "Your cart is empty"
    p.style.textAlign = "center"
    p.style.marginTop = "250px"
    var btn = document.createElement("button")
    btn.textContent = "START SHOPPING"
    btn.style.backgroundColor = "#FF0000"
    btn.style.border = "0"
    btn.style.width = "40%"
    btn.style.margin = "auto"
    btn.style.marginTop = "20px"
    btn.style.borderRadius = "8px"
    btn.style.padding = "10px 35px"
    btn.style.color = "white"
    btn.style.fontWeight = "600"
    document.getElementById("cc").append(p,btn)
  }else{
    boatcart.map(function(elem,idx){
      document.getElementById("cc").style.justifyContent = "flex-start"
      // ITEM CONTAINER
      var icontainer = document.createElement("div")
      icontainer.style.borderBottom = "1px solid lightgray"
      icontainer.style.display = "flex"
      icontainer.classList.add("icontain")
      var img1 = document.createElement("img")
      img1.setAttribute("src",elem.img)
      img1.style.width = "92px"
      var idiv1 = document.createElement("div")
      var p1 = document.createElement("p")
      p1.textContent = elem.name
      var p2 = document.createElement("p")
      p2.innerHTML = "₹"+elem.price + " <span>" +"₹"+ elem.ogprice + "</span>"
      var p3 = document.createElement("p")
      var span1 = document.createElement("span")
      span1.textContent = "-"
      span1.addEventListener("click",function(){
        if(elem.quan>1){
          elem.quan--
          localStorage.setItem("boat-cart",JSON.stringify(boatcart))
          updateCart()
        }
      })
      var span2 = document.createElement("span")
      span2.textContent = elem.quan
      var span3 = document.createElement("span")
      span3.textContent = "+"
      span3.addEventListener("click",function(){
          elem.quan++
          localStorage.setItem("boat-cart",JSON.stringify(boatcart))
          updateCart()
      })
      p3.append(span1,span2,span3)
      idiv1.append(p1,p2,p3)
      var img2 = document.createElement("img")
      img2.setAttribute("src","https://cdn.shopify.com/s/files/1/0057/8938/4802/files/Group_1_93145e45-8530-46aa-9fb8-6768cc3d80d2.png?v=1633783107")
      img2.style.width = "16px"
      img2.style.height = "16px"
      img2.addEventListener("click",function(){
        boatcart = boatcart.filter(function(e,i){
          return idx!=i
        })
        localStorage.setItem("boat-cart",JSON.stringify(boatcart)) 
        updateCart()
      })
      icontainer.append(img1,idiv1,img2)

      document.getElementById("cc").append(icontainer)
    })
  }
  document.getElementById("itemcount").textContent = boatcart.length

  // PRICE AND TOTAL DIV
  document.getElementById("cctotal").textContent = ""
  var div = document.createElement("div")

  var pdiv1 = document.createElement("div")
  var pp1 = document.createElement("p")
  pp1.textContent = "Shipping:"
  var pp2 = document.createElement("p")
  pp2.textContent = "FREE"
  var pdiv2 = document.createElement("div")
  var pp3 = document.createElement("p")
  pp3.textContent = "Total:"
  var pp4 = document.createElement("p")
  var sum = boatcart.reduce(function(acc,ce){
    var total = parseInt((ce.price).split(",").join("")) * parseInt(ce.quan)
    return acc + total
  },0)
  pp4.textContent =  "₹" + sum
  console.log(sum)
  pdiv1.append(pp1,pp2)
  pdiv2.append(pp3,pp4)

  var a1 = document.createElement("a")
  a1.textContent = "Continue Shopping >"
  a1.setAttribute("href","index.html")
  var btn1 = document.createElement("button")
  btn1.textContent = "PLACE ORDER"
  div.append(pdiv1,pdiv2,a1,btn1)

  document.getElementById("cctotal").append(div)
}
// show login div
function showLogin() {
  document.querySelector(".show2").classList.toggle("show3");
}

// navigation function
function showMain(){
  window.location.href = "index.html";
}

// drop down for categories
function showDiv() {
    document.getElementById("myDropdown").classList.toggle("show");
}
  // Close the dropdown if the user clicks outside of it
window.onclick = function(event) {
    if (!event.target.matches('.dropbtn')) {
      var dropdowns = document.getElementsByClassName("dropdown-content");
      var i;
      for (i = 0; i < dropdowns.length; i++) {
        var openDropdown = dropdowns[i];
        if (openDropdown.classList.contains('show')) {
          openDropdown.classList.remove('show');
        }
      }
    }
  }

 
  var products2 = JSON.parse(localStorage.getItem("productlist")) || []
  displayProd(products2)

  function handlesort(){
    var selected = document.querySelector("#featured").value;
    console.log(selected);
    if (selected == "htl") {
      products2.sort(function (a, b) {
        return b.finalPrice - a.finalPrice;
      });
      console.log(products2)
      displayProd(products2);
    }

    if (selected == "lth") {
      products2.sort(function (a, b) {
        return a.finalPrice - b.finalPrice;
      });
      console.log(products2)
      displayProd(products2);
    }

    if (selected == "a-z") {
        products2.sort(function (a, b) {
          if (a.name > b.name) return 1;
          if (a.name < b.name) return -1;
          return 0;
        });
  
        console.log(products2);
        displayProd(products2);
  
        // localStorage.setItem("jobApplications", JSON.stringify(appliedJobs));
        // window.location.reload();
      }
  
      if (selected == "z-a") {
        products2.sort(function (a, b) {
          if (a.name > b.name) return -1;
          if (a.name < b.name) return 1;
          return 0;
        });
        console.log(products2);
        displayProd(products2);

  }
}

function handlefilter() {
    var selected = document.querySelector("#filter").value;
    // filter will return array whenever it satifies the given condn

    var filteredList = products2.filter(function (elem) {
     if(selected == "1st"){
        return elem.finalPrice >=0 && elem.finalPrice<=500;
     }else if(selected == "2nd"){
        return elem.finalPrice >=501 && elem.finalPrice<=2000;
     }else if(selected == "3rd"){
        return elem.finalPrice >=2001 && elem.finalPrice<=5000;
     }else if(selected == "4th"){
        return elem.finalPrice >=5001 && elem.finalPrice<=12000;
     }else if(selected == "5th"){
        return elem.finalPrice >=12001 && elem.finalPrice<=18999;
     }else{
        return true
     }

      
    });

    console.log(filteredList)
    displayProd(filteredList)
  }